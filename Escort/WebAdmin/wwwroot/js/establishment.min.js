function ChangeEstablishmentStatus(n,t,i,r){toastr.remove();let f=r.hasAttribute("checked");f?$(r).prop("checked",!0):$(r).prop("checked",!1);let u="";i&&(u=t?$("#activateEstablishmentMsg").val():$("#deactivateEstablishmentMsg").val());swal({title:"Are you sure?",text:u,type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes"}).then(i=>{i?$.ajax({url:"/Establishment/ChangeEstablishmentStatus",data:{UserId:n,ActiveStatus:t},type:"Post",success:function(n){if(!n.message){let t=findError(n);if(t&&t==401)return showDeactivePopup(),!1}toastr.success(n.message);setTimeout(function(){Establishments.List()},1e3)},error:function(n){toastr.error(n.responseJSON?.message)}}):i||Establishments.List()})}$(function(){$.when(Establishments.ResetStateSaveDataTable()).then(function(){Establishments.List()})});let Establishmenttable=$("#data-table_Establishments"),Establishments={ResetStateSaveDataTable:function(){common.isReferrer()&&Establishmenttable.DataTable().state.clear()},List:function(){let n=[];$(Establishmenttable).find("thead tr th").each(function(t,i){let r=$(i).data("name"),u;switch(r.toLowerCase()){case"id":u={data:null,name:r,width:"5%",render:function(n,t,i,r){return r.row+r.settings._iDisplayStart+1}};break;case"name":u={data:null,name:r,"class":"fw-semibold",width:"15%",mRender:function(n){return`<a href="/Establishment/ProfileDetail?id=${n.id}"  >${n.name}</a>`}};break;case"displayname":u={data:null,name:r,width:"15%","class":"fw-semibold",mRender:function(n){return`<a href="/Establishment/ProfileDetail?id=${n.id}"  >${n.displayName}</a>`}};break;case"isactive":u={data:null,name:r,width:"10%",mRender:function(n){return n.isActive?`<div class="switchBtn">
                                            <input type="checkbox" hidden="hidden" id="checkbox_${n.id}" checked  onclick="ChangeEstablishmentStatus(`+n.id+`, false, true, this)">
                                            <label class="switch" for="checkbox_${n.id}"></label>
                                        </div>`:`<div class="switchBtn">
                                          <input type="checkbox"  hidden="hidden" id="checkbox_${n.id}" onclick="ChangeEstablishmentStatus(`+n.id+`, true, true, this)">
                                          <label class="switch"  for="checkbox_${n.id}"></label>
                                       </div>`}};break;case"subscription":u={data:null,name:r,width:"10%",mRender:function(n){return n.subscription?'<span class="greenActive">Active<\/span>':'<span class="pinkInactive">Inactive<\/span>'}};break;default:u={data:r.charAt(0).toLowerCase()+r.slice(1),name:r,width:"15%"}}n.push(u)});data={Country:$("#Country").val()};tbl.BindTable(Establishmenttable,`/Establishment/EstablishmentList`,data,n,[0,2,3])},filterRecord:function(){Establishments.List();dataTable.search($("#seachinput").val().trim()).draw()}};