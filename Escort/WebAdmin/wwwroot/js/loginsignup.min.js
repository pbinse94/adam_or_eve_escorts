function setTimezoneCookie(){let n="timezoneoffset";if($.cookie(n)){let t=parseInt($.cookie(n)),i=-(new Date).getTimezoneOffset();t!==i&&$.cookie(n,-(new Date).getTimezoneOffset())}else{let t="test cookie";$.cookie(t,!0);$.cookie(t)&&($.cookie(t,null),$.cookie(n,-(new Date).getTimezoneOffset()))}}function sendForgotPasswordEmail(n){if($("#forgotErrorSpan").hide(),EnableDisableButton($(n),!0),$("#toast-container").remove(),$("#forgotPasswordFrm").valid())$.ajax({type:"Post",url:"/Account/ForgetPassword",data:$("#forgotPasswordFrm").serialize(),dataType:"json",success:function(n){toastr.success(n.message);$("#Email").val("")},error:function(t){let i="";i=t.responseJSON?t.responseJSON?.message:somethingWrongMsg;toastr.error(i);EnableDisableButton($(n),!1)},complete:function(){EnableDisableButton($(n),!1)}});else return EnableDisableButton($(n),!1),!1}function resetPassword(n){EnableDisableButton($(n),!0);$("#toast-container").remove();let t=$("#Password").val().trim();if($("#ResetPasswordFrm").valid()&&t!="")$.ajax({type:"Post",url:"/Account/ResetPassword",data:$("#ResetPasswordFrm").serialize(),success:function(n){toastr.success(n.message);setTimeout(function(){window.location.href="/Account/Login"},setTimeoutIntervalEnum.onRedirection)},error:function(t){toastr.error(t.responseJSON?.message);EnableDisableButton($(n),!1)},complete:function(){EnableDisableButton($(n),!1)}});else return EnableDisableButton($(n),!1),!1}function sendVerifyEmailLink(n){if(EnableDisableButton($(n),!0),$("#toast-container").remove(),$("#VerifyEmailFrm").valid())$.ajax({type:"Post",url:"/Account/VerifyEmail",data:$("#VerifyEmailFrm").serialize(),success:function(n){toastr.success(n.message);$("#loginmodel").modal("hide")},error:function(t){t.responseJSON?toastr.error(t.responseJSON?.message):toastr.error(somethingWrongMsg);EnableDisableButton($(n),!1)},complete:function(){EnableDisableButton($(n),!1)}});else return EnableDisableButton($(n),!1),!1}function login(n){if($("#toast-container").remove(),$("#errorSpan").hide(),EnableDisableButton($(n),!0),$("#loginFrm").valid())$(".Loading").show(),$.ajax({type:"Post",url:"/Account/Login",data:$("#loginFrm").serialize(),success:function(n){$("#login").modal("hide");n.data.userTypeId==1?location.href="Admin/Dashboard/index":n.data.userTypeId==4?window.location.href="/establishment/index":n.apiName?window.location.href=n.apiName:location.href="/home/index"},complete:function(){EnableDisableButton($(n),!1);$(".Loading").hide()},error:function(t){t.responseJSON?.data.showEmailVerificationPopUp&&($(".modal#login").modal("hide"),ShowVerifyEmailPopup());$("#errorSpan").text(t.responseJSON?.message);$("#errorSpan").show();EnableDisableButton($(n),!1);$(".Loading").hide()}});else return EnableDisableButton($(n),!1),!1}function ShowVerifyEmailPopup(){$.ajax({type:"Get",url:"/Account/VerifyEmail",success:function(n){$.when($("#loginmodelbody").html(n)).then(function(){document.getElementById("VerifyEmailFrm").addEventListener("submit",function(n){n.preventDefault()});document.getElementById("VerifyEmailFrm").addEventListener("keypress",function(n){n.which==13&&sendVerifyEmailLink($("#verificatonBtn"))})})},complete:function(){$("#loginmodel").modal("show");$(".backdrop-modal").show()},error:function(){}})}function ClosePopup(){$("#loginmodel").hide();$(".backdrop-modal").hide()}$(function(){$("#loginFrm").on("keypress",function(n){n.which==13&&login($("#submitBtn"))});$("#forgotPasswordFrm").on("keypress",function(n){n.which==13&&sendForgotPasswordEmail($("#submitBtn"))})});